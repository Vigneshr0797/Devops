Your kubelet is failing for **two separate reasons**:

---

# âœ… **1. MAIN FAILURE â†’ Kernel parameters incorrect**

Error:

```
Failed to start ContainerManager err="[invalid kernel flag: vm/overcommit_memory, expected value: 1, actual value: 0,
 invalid kernel flag: kernel/panic, expected value: 10, actual value: 0]"
```

Your kubelet has **ProtectKernelDefaults: true**, so it enforces certain kernel parameters.

You must fix **two sysctl values**:

---

## **Fix 1: Set vm.overcommit_memory = 1**

Run:

```bash
echo "vm.overcommit_memory = 1" >> /etc/sysctl.d/99-kubernetes.conf
sysctl -w vm.overcommit_memory=1
```

---

## **Fix 2: Set kernel.panic = 10**

Run:

```bash
echo "kernel.panic = 10" >> /etc/sysctl.d/99-kubernetes.conf
sysctl -w kernel.panic=10
```

---

## **Apply all sysctl changes**

```bash
sysctl --system
```

---

# ðŸ”„ Restart kubelet

```bash
systemctl restart kubelet
systemctl status kubelet -l
```

---

# âœ… **2. SECOND FAILURE â†’ kubelet can't reach API server**

Error:

```
dial tcp 10.57.12.120:6443: connect: connection refused
```

This means:

* Your **apiserver on 10.57.12.120:6443 is DOWN**, OR
* Firewall is blocking port **6443**, OR
* HAProxy / load balancer not forwarding traffic.

### Check if API server is running:

```bash
crictl ps | grep kube-apiserver
```

If nothing shows â†’ API server is down.

### Check API process:

```bash
ps -ef | grep kube-apiserver
```

### Check port:

```bash
ss -lntp | grep 6443
```

### If using HAProxy:

Restart it:

```bash
systemctl restart haproxy
systemctl status haproxy
```

---

# âœ” Final Expected Output

Once you fix sysctl + API server connectivity, kubelet will start normally.

---

# If you want, send:

### ðŸ“Œ Your **/etc/kubernetes/kubelet-config.yaml**

### ðŸ“Œ Output of:

```
sysctl -a | grep -E "overcommit_memory|kernel.panic"
ss -lntp | grep 6443
crictl ps | grep apiserver
```

I will tell you exactly what else is missing.
